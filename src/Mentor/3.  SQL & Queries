# SQL & Queries

- **PostgreSQL**

    as the database, and our backend application connects to it to store and retrieve data.

- **DDL, DML**

    Data Definition Language defines or changes the database structure (tables, columns).

    **Data Manipulation Language** works with the data inside those structures (insert, update, delete).

- **Serial, Primary key (PK), Foreign Key (FK)**

    `id SERIAL PRIMARY KEY *- /** auto-incrementing integer */`

    **`PRIMARY KEY`-** Unique identifier for each row, can not be `NULL`

    **`Foreign KEY` -** A field in one table that uniquely identifies a row of another table.

- **`SELECT`, `FROM`, `WHERE`**
    - Purpose: To filter records based on a condition.
    - Syntax: `SELECT column1, column2 FROM TableName WHERE condition;` `(filtering)`
    - Example: `SELECT FirstName, LastName FROM Employees WHERE DepartmentID = 101;`

    `SELECT category, productss.name FROM productss WHERE price > 2000;`

- **Logical operators: AND, OR, NOT**

    ![image.png](attachment:03020bd6-6822-423d-abe6-c7c76760518c:image.png)

- **AS, LIKE**

    Alias: `SELECT customerss.first_name || ' ' || customerss.last_name AS full_name, customerss.phone
    FROM customerss; /* concatenation operator, AS (alias (nickname)) */`

    ![image.png](attachment:dd704554-6896-4a28-ad38-6a197f44020f:image.png)

    ![image.png](attachment:57590e3c-ee13-48f3-9b9a-300c042b8df2:image.png)

- **Distinct, Cascade, Truncate**

    DISTINCT - removes duplicate values returns unique (non-duplicate) category values.

    CASCADE →An operation on a parent entity (like save or delete) automatically applies to its related
    child entities (dependent).

    TRUNCATE → Deletes all rows immediately and resets any `SERIAL` but keep table

    - Example:

        `SELECT DISTINCT category FROM productss WHERE category LIKE '%ho%';`

        `customer_id INT NOT NULL REFERENCES customerss(id) ON DELETE CASCADE,`

        `REFERENCES customers(id)` → foreign key

        `ON DELETE CASCADE` → automatically delete dependent rows when parent row is deleted

        TRUNCATE TABLE order_item;

        - Addition:

            `TRUNCATE TABLE customerss CASCADE; /* Deletes all rows and dependent raw immediately. */`

            `TRUNCATE TABLE customerss RESTART IDENTITY CASCADE; /* Deletes all rows and dependent raw
            immediately and resets any SERIAL*/`

- **Current_date, Timestamps**

    `DEFAULT CURRENT_DATE` → automatically fills today’s date if you don’t specify it

    `DEFAULT CURRENT_TIMESTAMP` → automatically fills today’s date and time  if you don’t specify it.

- **Alter, Update (case)**

    `ALTER TABLE customerss ADD COLUMN age INT DEFAULT 18;`
    `ALTER TABLE customerss DROP COLUMN age;`

    Update : `UPDATE customerss SET email='aaliyev@example.com' WHERE id=1;`

    - Case example:

        ![image.png](attachment:34ba4092-b3b0-4ace-bce0-105607c85070:image.png)

- **Drop, Delete**

    DROP TABLE - removes table and its data, DELETE FROM- removes rows

    - **`ORDER BY`**

        * Purpose: To sort the result set.
        * Syntax: `SELECT column1, column2 FROM TableName ORDER BY column1 [ASC|DESC];`
        * Example: `SELECT FirstName, LastName FROM Employees ORDER BY LastName ASC A->Z);`