# #31. NoSQL Databases (MongoDB)

### Introduction to MongoDB, document databases, data modeling, and basic operations.

- SQL vs. NoSQL
    - **RDBMS** **normalizes** data and stores it in different tables, then combines these pieces using `JOIN`. **Data Integrity (ACID)** is a priority.
    - **MongoDB** **denormalizes** data and stores it in a single document. This allows you to retrieve all the necessary information with a single query. **Flexibility** and **Scalability** are a priority.

    This explains why MongoDB is ideal for faster development and large, variable data.

- What is NoSQL
    - **NoSQL** stands for "Not Only SQL." It refers to databases that provide flexible schemas, horizontal scaling, and are designed for distributed data storage.
    - NoSQL databases are particularly well-suited for handling large volumes of data and real-time web applications.
- Why MongoDB
    - **MongoDB** is one of the most popular NoSQL databases.
    - It stores data in a flexible, JSON-like format called BSON.
    - Benefits:
        - High performance and scalability
        - Flexible schema design
        - Easy to integrate with modern programming languages and frameworks (including Java/Spring)
- Document Databases
    - **Documents**: Data is stored in documents (similar to JSON objects) that can have nested fields.
    - **Collections**: Documents are grouped into collections, analogous to tables in relational databases.
    - **Schema Flexibility**: Each document in a collection can have a different structure.
- Advantages over Relational Databases
    - **Flexibility**: You don't have to define a fixed schema.
    - **Scalability**: Horizontal scaling is easier and more cost-effective.
    - **Performance**: Optimized for high read/write throughput in distributed systems.
- MongoDB Architecture

    Core Components

    - **Databases**: A database contains collections of documents.
    - **Collections**: Similar to tables, they group documents together.
    - **Documents**: The basic unit of data in MongoDB, stored in BSON format.
    - **Indexes**: Improve the performance of read operations.
    - **Replication & Sharding**:
        - **Replication**: For high availability, MongoDB can replicate data across multiple servers.
        - **Sharding**: For horizontal scaling, data is partitioned across different machines.
- MongoDB Shell
    - Use the MongoDB shell (`mongosh`) for command-line interaction.
    - Basic commands include:
        - `show dbs`
        - `use <database>`
        - `show collections`
- Data Modeling in MongoDB
    - **Denormalization**: Embed related data within a single document to avoid joins.
    - **Normalization**: In some cases, reference related documents to reduce data duplication.
    - **Data Access Patterns**: Model your data based on how your application accesses it.
    - **Embedding vs. Referencing**:
        - **Embedding**: Good for one-to-few relationships.
        - **Referencing**: Suitable for one-to-many or many-to-many relationships.
    - Example

        ![image.png](attachment:6d088940-0343-43e5-affa-73490e914bdb:image.png)

- Embedded Documents

    **Embedded Document** means that data that belongs to a data object but would traditionally be stored in a separate table (e.g. address, comment, order details) is stored **directly within (inside)** the main document.

    This is called **Denormalization** (grouping data together) as opposed to **Normalization** (breaking up data to prevent duplication) in Relational DB.

    - Example:

        ![image.png](attachment:904d5c1b-1eed-4d69-9ae5-9522695b0fc7:image.png)

        ![image.png](attachment:79ac350d-239d-4878-92dc-c2b4dab34660:image.png)